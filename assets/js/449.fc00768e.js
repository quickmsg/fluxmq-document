(window.webpackJsonp=window.webpackJsonp||[]).push([[449],{778:function(s,t,a){"use strict";a.r(t);var r=a(25),e=Object(r.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"sql-语法与示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-语法与示例"}},[s._v("#")]),s._v(" SQL 语法与示例")]),s._v(" "),t("h2",{attrs:{id:"sql-语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-语法"}},[s._v("#")]),s._v(" SQL 语法")]),s._v(" "),t("h3",{attrs:{id:"from、select-和-where-子句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#from、select-和-where-子句"}},[s._v("#")]),s._v(" FROM、SELECT 和 WHERE 子句")]),s._v(" "),t("p",[s._v("规则的 SQL 语句基本格式为:")]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("字段名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("事件类型"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("条件"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("ul",[t("li",[s._v("FROM 子句将规则挂载到某个事件类型上，可多选")]),s._v(" "),t("li",[s._v("SELECT 子句用于对数据进行变换，并选择出需要的字段")]),s._v(" "),t("li",[s._v("WHERE 子句用于对 SELECT 选择出来的某个字段施加条件过滤")])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[s._v("## "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" 语句用于决定最终的输出结果里的字段。比如"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n## 下面 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v(" 的输出结果中将只有两个字段 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a"')]),s._v(" 和 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("a")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v("\n\n# 选取 username 为 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'abc'")]),s._v(" 的建立连接消息，输出结果为所有可用字段"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.CONNECT"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'abc'")]),s._v("\n\n## 选取 clientId 为 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'abc'")]),s._v(" 的终端发来的消息，输出结果将只有 cid 一个字段。\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" clientId "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cid "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" clientId "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'abc'")]),s._v("\n\n## 选取 qos 为 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" 的发布消息，输出结果将只有 cid 一个字段。\n## 注意虽然 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" 语句中只选取了 cid 一个字段，所有消息发布事件中的可用字段 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("比如 clientId、topic 等"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 仍然可以在 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" 语句中使用"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" clientId "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cid "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" qos "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n## 但下面这个 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v(" 语句就不能工作了，因为变量 xyz 不是消息发布事件中的可用字段"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" clientId "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cid "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" xyz "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'abc'")]),s._v("\n")])])]),t("h3",{attrs:{id:"比较符号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#比较符号"}},[s._v("#")]),s._v(" 比较符号")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("函数名")]),s._v(" "),t("th",[s._v("函数作用")]),s._v(" "),t("th",[s._v("返回值")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v(">")]),s._v(" "),t("td",[s._v("大于")]),s._v(" "),t("td",[s._v("true/false")])]),s._v(" "),t("tr",[t("td",[s._v("<")]),s._v(" "),t("td",[s._v("小于")]),s._v(" "),t("td",[s._v("true/false")])]),s._v(" "),t("tr",[t("td",[s._v("<=")]),s._v(" "),t("td",[s._v("小于等于")]),s._v(" "),t("td",[s._v("true/false")])]),s._v(" "),t("tr",[t("td",[s._v(">=")]),s._v(" "),t("td",[s._v("大于等于")]),s._v(" "),t("td",[s._v("true/false")])]),s._v(" "),t("tr",[t("td",[s._v("<>")]),s._v(" "),t("td",[s._v("不等于")]),s._v(" "),t("td",[s._v("true/false")])]),s._v(" "),t("tr",[t("td",[s._v("!=")]),s._v(" "),t("td",[s._v("不等于")]),s._v(" "),t("td",[s._v("true/false")])]),s._v(" "),t("tr",[t("td",[s._v("=")]),s._v(" "),t("td",[s._v("比较两者是否完全相等。可用于比较变量和主题")]),s._v(" "),t("td",[s._v("true/false")])]),s._v(" "),t("tr",[t("td",[s._v("=~")]),s._v(" "),t("td",[s._v("比较主题(topic)是否能够匹配到主题过滤器(topic filter)。只能用于主题匹配")]),s._v(" "),t("td",[s._v("true/false")])])])]),s._v(" "),t("h2",{attrs:{id:"sql-语句示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-语句示例"}},[s._v("#")]),s._v(" SQL 语句示例")]),s._v(" "),t("h3",{attrs:{id:"基本语法举例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本语法举例"}},[s._v("#")]),s._v(" 基本语法举例")]),s._v(" "),t("ul",[t("li",[s._v('从 topic 为 "t/a" 的消息中提取所有字段:')])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" topic "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'t/a'")]),s._v("\n")])])]),t("ul",[t("li",[s._v('从 topic 为 "t/a" '),t("strong",[s._v("或")]),s._v(' "t/b" 的消息中提取所有字段:')])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" topic "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'t/a'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("or")]),s._v(" topic "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'t/b'")]),s._v("\n")])])]),t("ul",[t("li",[s._v("从 topic 能够匹配到 't/#' 的消息中提取所有字段。")])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" topic "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~ "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t/#"')]),s._v("\n")])])]),t("ul",[t("li",[s._v("从 topic 能够匹配到 't/#' 的消息中提取 qos、messageId 和 clientId 字段:")])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" qos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" messageId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" clientId "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" topic "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~ "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t/#"')]),s._v("\n")])])]),t("ul",[t("li",[s._v("从 建立连接 消息中提取 username 字段，并且筛选条件为 username = 'fluxmq':")])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" username "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.CONNECT"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fluxmq'")]),s._v("\n")])])]),t("ul",[t("li",[s._v("从任意 topic 的 JSON 消息体(payload) 中 "),t("strong",[s._v("提取 x 字段")]),s._v('，并创建别名 x 以便在 WHERE 子句中使用。WHERE 子句限定条件为 x = 1。下面这个 SQL 语句可以匹配到消息体 {"x": 1}，但不能匹配到消息体 {"x": 2}:')])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" payload"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" x "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" payload"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("ul",[t("li",[s._v('类似于上面的 SQL 语句，但 **嵌套地提取 **消息体中的数据，下面的 SQL 语句可以匹配到 JSON 消息体 {"x": {"y": 1}}:')])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" payload "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" payload"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("y "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("ul",[t("li",[s._v("在 clientId = 'c1' 连接成功时，提取其来源 IP 地址:")])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" clientIp "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.CONNECT"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" clientId "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'c1'")]),s._v("\n")])])]),t("ul",[t("li",[s._v("筛选所有订阅 't/#' 主题 "),t("strong",[s._v("且")]),s._v(" 订阅级别为 QoS 1 的 clientId:")])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" clientId "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.SUBSCRIBE"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" topic "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~ "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'t/#'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" qos "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("ul",[t("li",[s._v("筛选所有订阅主题能匹配到 't/#' 且订阅级别为 QoS 1 的 clientId。注意与上例不同的是，这里用的是主题匹配操作符 "),t("strong",[s._v("'=~'")]),s._v("，所以会匹配订阅 't' 或 't/+/a' 的订阅事件:")])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" clientId "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.SUBSCRIBE"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" topic "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~ "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'t/#'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" qos "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("ul",[t("li",[s._v('从topic包含"fluxmq"字符的消息中提取所有字段，使用 \''),t("strong",[s._v("like")]),s._v("' 语法，包含的字符用%包裹：")])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" topic "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("like")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%fluxmq%'")]),s._v("\n")])])]),t("ul",[t("li",[s._v("使用"),t("strong",[s._v("常量字段")]),s._v('，用双引号""包裹字符串，作为常量值；as后面跟字段，作为输出的字段名：')])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" event "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v("\n")])])]),t("ul",[t("li",[s._v("可以直接使用Java的String API，如 "),t("strong",[s._v("startsWith，endsWith")]),s._v("；获取以'test'开头的所有Publish消息：")])]),s._v(" "),t("div",{staticClass:"language-plsql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-plsql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$EVENT.PUBLISH"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" topic"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("startsWith"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[t("strong",[s._v("提示")])]),s._v(" "),t("ul",[t("li",[s._v("FROM 子句后面的主题需要用双引号 \"\"，或者单引号 '' 引起来。")]),s._v(" "),t("li",[s._v("WHERE 子句后面接筛选条件，如果使用到字符串需要用单引号 '' 引起来。")]),s._v(" "),t("li",[s._v('FROM 子句里如有多个事件，需要用逗号 "," 分隔。例如 SELECT * FROM "t/1", "t/2" 。')]),s._v(" "),t("li",[s._v('可以使用使用 "." 符号对json字段进行嵌套选择。')]),s._v(" "),t("li",[s._v("尽量不要给 payload 创建别名，否则会影响运行性能。即尽量不要这么写：SELECT payload as p")])])])}),[],!1,null,null,null);t.default=e.exports}}]);