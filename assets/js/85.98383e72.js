(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{1110:function(t,s,r){"use strict";r.r(s);var _=r(25),v=Object(_.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"创建规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建规则"}},[t._v("#")]),t._v(" 创建规则")]),t._v(" "),s("p",[t._v("本指南介绍如何在 FluxMQ Dashboard 中创建规则。登录 FluxMQ Dashboard，点击左侧导航目录中的 "),s("strong",[t._v("规则引擎")]),t._v(" -> "),s("strong",[t._v("规则管理")]),t._v("。然后点击 + 创建"),s("strong",[t._v("按钮，右侧滑出")]),t._v("规则配置页面。在这里，您可以定义规则的数据源，并确定消息过滤的后续操作，例如重新发布、将结果打印到日志文件或通过数据桥接进行转发。"),s("br"),t._v("以下步骤演示如何创建一个规则，该规则监听主题为 test/# 的消息，并将接收到的消息转发到主题 target/1。")]),t._v(" "),s("h2",{attrs:{id:"定义规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义规则"}},[t._v("#")]),t._v(" 定义规则")]),t._v(" "),s("p",[t._v("在"),s("strong",[t._v("规则管理")]),t._v("页面上，输入规则的名称并添加备注以便未来管理。"),s("br"),t._v("在 "),s("strong",[t._v("SQL 编辑器")]),t._v("中，可以通过下拉框选择符合您业务需求的"),s("strong",[t._v("规则数据类型")]),t._v("，如发布消息、订阅消息等，支持多选。"),s("br"),t._v("配置 "),s("strong",[t._v("规则动作类型")]),t._v(" 指定数据转发的目标数据源和动作，数据源配置的详细信息参阅 FluxMQ-数据源配置手册。"),s("br"),t._v("FluxMQ 内置了丰富的 SQL 语句示例，以帮助您入门。您可以在 "),s("strong",[t._v("SQL 编辑器")]),t._v("下点击 **添加SQL调试 **按钮进行探索。有关 SQL 语法和用法的更多详细信息，请参阅 "),s("a",{attrs:{href:"GRAMMAR#jump1"}},[s("strong",[t._v("SQL 语法与示例")])]),t._v("。"),s("br"),s("img",{attrs:{src:r(321),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"测试-sql-语句"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试-sql-语句"}},[t._v("#")]),t._v(" 测试 SQL 语句")]),t._v(" "),s("p",[t._v("这是一个可选步骤，但如果您第一次使用 FluxMQ 规则引擎，建议进行测试。打开 "),s("strong",[t._v("添加SQL调试")]),t._v(" 开关，启用 SQL 语句测试。"),s("br"),t._v("FluxMQ 为所有字段提供了默认值，例如"),s("strong",[t._v("节点IP")]),t._v("、"),s("strong",[t._v("客户端 ID")]),t._v("、"),s("strong",[t._v("用户名")]),t._v("、"),s("strong",[t._v("主题")]),t._v("、"),s("strong",[t._v("QoS")]),t._v("、"),s("strong",[t._v("Payload")]),t._v(" 等。您只需点击"),s("strong",[t._v("测试")]),t._v("按钮即可开始测试。如果一切正常，将通过调试结果展示。"),s("br"),s("img",{attrs:{src:r(322),alt:""}}),s("br"),t._v("SQL 处理结果将以 JSON 形式呈现在"),s("strong",[t._v("输出结果")]),t._v("部分。SQL 处理结果中的所有字段都可以通过后续操作（内置操作或数据桥接）以 ${key}的形式进行引用。有关字段的详细说明，请参阅 "),s("a",{attrs:{href:"EVENT#jump1"}},[s("strong",[t._v("SQL 事件类型与字段")])]),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"添加消息重发布操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加消息重发布操作"}},[t._v("#")]),t._v(" 添加消息重发布操作")]),t._v(" "),s("p",[t._v("要将主题为 test/# 的消息重新发布到主题 target/1，在页面右侧点击 "),s("strong",[t._v("规则动作类型 "),s("strong",[t._v("按钮。在下拉菜单中选择")]),t._v("MQTT数据源")]),t._v("，然后在点击 **保存 **按钮之前，配置以下设置：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("主题")]),t._v("：在本示例中设置为目标主题 target/1；")]),t._v(" "),s("li",[s("strong",[t._v("Qos")]),t._v("：在本示例中设置为重新发布的消息的 QoS 为0；")]),t._v(" "),s("li",[s("strong",[t._v("是否异步")]),t._v("：在本示例中设置为非异步，可视转发效率配置与否；")]),t._v(" "),s("li",[s("strong",[t._v("规则描述")]),t._v("：说明此规则配置的作用，方便后续检查与管理。")])]),t._v(" "),s("p",[s("img",{attrs:{src:r(323),alt:""}}),s("br"),t._v("在"),s("strong",[t._v("添加规则")]),t._v("页面，点击底部的 **保存 **按钮以完成规则创建。此规则将作为新条目添加到 **规则管理 **页面。您可以查看规则 ID、数据类型、行为类型。您还可以点击 **编辑 **来修改数据源或添加更多操作，或者点击 **复制规则、启用或禁用规则、删除规则 **。"),s("br"),s("img",{attrs:{src:r(324),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"使用数据桥接转发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用数据桥接转发"}},[t._v("#")]),t._v(" 使用数据桥接转发")]),t._v(" "),s("p",[t._v("您还可以添加使用数据桥接转发的操作。您只需从 **规则动作类型 **下拉列表中选择目标数据源桥接即可。以转发mysql为例："),s("br"),s("img",{attrs:{src:r(325),alt:""}})])])}),[],!1,null,null,null);s.default=v.exports},321:function(t,s,r){t.exports=r.p+"assets/img/rule_1.c86b0e38.png"},322:function(t,s,r){t.exports=r.p+"assets/img/rule_2.05456a2b.png"},323:function(t,s,r){t.exports=r.p+"assets/img/rule_3.cdfc8499.png"},324:function(t,s,r){t.exports=r.p+"assets/img/rule_4.ce5f14a5.png"},325:function(t,s,r){t.exports=r.p+"assets/img/rule_5.f9429534.png"}}]);