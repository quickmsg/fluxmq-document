(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{276:function(t,s,a){t.exports=a.p+"assets/img/img.b670d772.png"},425:function(t,s,a){t.exports=a.p+"assets/img/img_5.e2c2629a.png"},426:function(t,s,a){t.exports=a.p+"assets/img/img_6.84b96119.png"},427:function(t,s,a){t.exports=a.p+"assets/img/img_7.6fcb846b.png"},428:function(t,s,a){t.exports=a.p+"assets/img/img_8.b7cc3853.png"},429:function(t,s,a){t.exports=a.p+"assets/img/img_9.5d905a7a.png"},430:function(t,s,a){t.exports=a.p+"assets/img/img_10.80ec295c.png"},431:function(t,s,a){t.exports=a.p+"assets/img/img_11.019fb7c1.png"},432:function(t,s,a){t.exports=a.p+"assets/img/img_12.47348a4a.png"},433:function(t,s,a){t.exports=a.p+"assets/img/img_13.73f94379.png"},434:function(t,s,a){t.exports=a.p+"assets/img/img_14.5b835097.png"},435:function(t,s,a){t.exports=a.p+"assets/img/img_18.141737ed.png"},436:function(t,s,a){t.exports=a.p+"assets/img/img_15.108de22d.png"},437:function(t,s,a){t.exports=a.p+"assets/img/img_16.34a73ae9.png"},438:function(t,s,a){t.exports=a.p+"assets/img/img_17.8957d6f5.png"},439:function(t,s,a){t.exports=a.p+"assets/img/img_19.f2866832.png"},440:function(t,s,a){t.exports=a.p+"assets/img/img_20.d948bd18.png"},441:function(t,s,a){t.exports=a.p+"assets/img/img_21.ee5188fe.png"},442:function(t,s,a){t.exports=a.p+"assets/img/img_22.cc5e7ca5.png"},443:function(t,s,a){t.exports=a.p+"assets/img/img_23.10bc6a30.png"},924:function(t,s,a){"use strict";a.r(s);var r=a(25),e=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"广播压测"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#广播压测"}},[t._v("#")]),t._v(" 广播压测")]),t._v(" "),s("p",[s("img",{attrs:{src:a(276),alt:"image.png"}})]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Dname")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$AppName")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Duser.timezone")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Asia/Shanghai "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Xmx28G")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Xms28G")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:MetaspaceSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("200M  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:+UseG1GC")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:MaxGCPauseMillis")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" -Xloggc:"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("$APP_HOME"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("/gc.log "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:GCLogFileSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("10M "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:NumberOfGCLogFiles")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:+UseGCLogFileRotation")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:+PrintGCDateStamps")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:+PrintGCTimeStamps")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:+PrintGCDetails")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:+DisableExplicitGC")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-verbose:gc")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("仅仅部署一台MQTT节点进行压测")])]),t._v(" "),s("h3",{attrs:{id:"_10w-tps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10w-tps"}},[t._v("#")]),t._v(" 10W TPS")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("订阅")]),t._v(" "),s("th",[t._v("推送")]),t._v(" "),s("th",[t._v("报文大小")]),t._v(" "),s("th",[t._v("cpu")]),t._v(" "),s("th",[t._v("内存内存(最大使用)")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("50000")]),t._v(" "),s("td",[t._v("2/s")]),t._v(" "),s("td",[t._v("160B")]),t._v(" "),s("td",[t._v("20%")]),t._v(" "),s("td",[t._v("1.7G")])]),t._v(" "),s("tr",[s("td",[t._v("50000")]),t._v(" "),s("td",[t._v("2/s")]),t._v(" "),s("td",[t._v("1024B")]),t._v(" "),s("td",[t._v("22%")]),t._v(" "),s("td",[t._v("1.9G")])])])]),t._v(" "),s("p",[s("strong",[t._v("160B压测截图：")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(425),alt:"Dashboard"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(426),alt:"MQTT"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(427),alt:"JVM"}})]),t._v(" "),s("p",[s("strong",[t._v("1024B压测截图：")]),t._v(" "),s("img",{attrs:{src:a(428),alt:"Dashboard"}}),t._v(" "),s("img",{attrs:{src:a(429),alt:"MQTT"}}),t._v(" "),s("img",{attrs:{src:a(430),alt:"JVM"}})]),t._v(" "),s("h3",{attrs:{id:"_20w-tps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_20w-tps"}},[t._v("#")]),t._v(" 20W TPS")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("订阅")]),t._v(" "),s("th",[t._v("推送")]),t._v(" "),s("th",[t._v("报文大小")]),t._v(" "),s("th",[t._v("cpu")]),t._v(" "),s("th",[t._v("内存(最大使用)")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("50000")]),t._v(" "),s("td",[t._v("4/s")]),t._v(" "),s("td",[t._v("160B")]),t._v(" "),s("td",[t._v("23%")]),t._v(" "),s("td",[t._v("1.7G")])]),t._v(" "),s("tr",[s("td",[t._v("50000")]),t._v(" "),s("td",[t._v("4/s")]),t._v(" "),s("td",[t._v("1024B")]),t._v(" "),s("td",[t._v("24%")]),t._v(" "),s("td",[t._v("1.9G")])])])]),t._v(" "),s("p",[s("strong",[t._v("160B压测截图：")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(431),alt:"MQTT"}}),t._v(" "),s("img",{attrs:{src:a(432),alt:"MQTT"}}),t._v(" "),s("img",{attrs:{src:a(433),alt:"JVM"}}),t._v(" "),s("img",{attrs:{src:a(434),alt:"MQTT"}})]),t._v(" "),s("p",[s("strong",[t._v("1024B压测截图：")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(435),alt:"JVM"}}),t._v(" "),s("img",{attrs:{src:a(436),alt:"Dashboard"}}),t._v(" "),s("img",{attrs:{src:a(437),alt:"MQTT"}}),t._v(" "),s("img",{attrs:{src:a(438),alt:"MQTT"}})]),t._v(" "),s("h3",{attrs:{id:"_40w-tps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_40w-tps"}},[t._v("#")]),t._v(" 40W TPS")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("订阅")]),t._v(" "),s("th",[t._v("推送")]),t._v(" "),s("th",[t._v("报文大小")]),t._v(" "),s("th",[t._v("cpu")]),t._v(" "),s("th",[t._v("内存(最大使用)")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("100000")]),t._v(" "),s("td",[t._v("4/s")]),t._v(" "),s("td",[t._v("160B")]),t._v(" "),s("td",[t._v("48%")]),t._v(" "),s("td",[t._v("15G")])]),t._v(" "),s("tr",[s("td",[t._v("100000")]),t._v(" "),s("td",[t._v("4/s")]),t._v(" "),s("td",[t._v("1024B")]),t._v(" "),s("td",[t._v("GC过长 已到瓶颈")]),t._v(" "),s("td")])])]),t._v(" "),s("p",[s("strong",[t._v("160B压测截图：")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(439),alt:"Dashboard"}}),t._v(" "),s("img",{attrs:{src:a(440),alt:"MQTT"}}),t._v(" "),s("img",{attrs:{src:a(441),alt:"MQTT"}}),t._v(" "),s("img",{attrs:{src:a(442),alt:"JVM"}})]),t._v(" "),s("p",[s("strong",[t._v("1024B压测截图：")])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("如果追求极致性能 还是有很大优化空间")]),t._v(" "),s("img",{attrs:{src:a(443),alt:"JVM"}})])])])}),[],!1,null,null,null);s.default=e.exports}}]);