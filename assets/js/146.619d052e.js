(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{611:function(s,t,a){s.exports=a.p+"assets/img/img_2.d6052d34.png"},612:function(s,t,a){s.exports=a.p+"assets/img/img_1.d46b7af4.png"},710:function(s,t,a){"use strict";a.r(t);var n=a(25),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"日志系统部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日志系统部署"}},[s._v("#")]),s._v(" 日志系统部署")]),s._v(" "),t("h2",{attrs:{id:"_1-安装es"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装es"}},[s._v("#")]),s._v(" 1. 安装ES")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("https://fluxmq.obs.cn-east-3.myhuaweicloud.com/install_elk.zip\n")])])]),t("p",[s._v("上传安装包install_elk.zip 到服务器上")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" install_elk.zip\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入解压目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/install_monitor\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#脚本赋权")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x ./*\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#部署(elasticsearch、logstash)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" install_elk.sh  elk\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#部署日志采集")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ip1:部署服务器内网ip  ip2/3/4:fluxmq节点内网ip）----ip1 需要到ip2、ip3、ip4免密")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#log_path 日志打印目录，比如/soft,注意打印的日志文件须满足：*info.log、*error.log、*warn.log")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" install_elk.sh filebeat ip1  ip2,ip3,ip4  log_path\n")])])]),t("h2",{attrs:{id:"_2-es验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-es验证"}},[s._v("#")]),s._v(" 2. ES验证")]),s._v(" "),t("p",[t("img",{attrs:{src:a(611),alt:"img_2.png"}}),s._v(" "),t("strong",[s._v("curl -u elastic:fluxmq  localhost:9200")]),s._v("\n返回结果如下：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"es1"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster_name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mqtt-es"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster_uuid"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cL5q-sK8RtKDmGVMYCxzbQ"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"number"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7.5.1"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build_flavor"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build_type"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build_hash"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3ae9ac9a93c95bd0cdc054951cf95d88e1e18d96"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build_date"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2019-12-16T22:57:37.835892Z"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build_snapshot"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lucene_version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8.3.0"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"minimum_wire_compatibility_version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6.8.0"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"minimum_index_compatibility_version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6.0.0-beta1"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tagline"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"You Know, for Search"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"_3-filebeat验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-filebeat验证"}},[s._v("#")]),s._v(" 3. filebeat验证")]),s._v(" "),t("p",[s._v("日志采集服务器上执行：ps -ef|grep beat\n"),t("img",{attrs:{src:a(612),alt:"img_1.png"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);