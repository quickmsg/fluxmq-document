(window.webpackJsonp=window.webpackJsonp||[]).push([[554],{1022:function(s,a,t){"use strict";t.r(a);var e=t(25),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"系统优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统优化"}},[s._v("#")]),s._v(" 系统优化")]),s._v(" "),a("h2",{attrs:{id:"操作系统参数优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作系统参数优化"}},[s._v("#")]),s._v(" 操作系统参数优化")]),s._v(" "),a("h3",{attrs:{id:"内存分配策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内存分配策略"}},[s._v("#")]),s._v(" 内存分配策略")]),s._v(" "),a("blockquote",[a("p",[s._v("必须修改")])]),s._v(" "),a("p",[s._v("编辑: vim /etc/sysctl.conf")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("vm.overcommit_memory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),a("p",[s._v("执行"),a("code",[s._v("sysctl -p")]),s._v("刷新")]),s._v(" "),a("h3",{attrs:{id:"系统全局最大文件句柄"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统全局最大文件句柄"}},[s._v("#")]),s._v(" 系统全局最大文件句柄")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" fs.file-max"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("fs.nr_open")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /proc/sys/fs/nr_open\n")])])]),a("h3",{attrs:{id:"临时会话最大文件句柄"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#临时会话最大文件句柄"}},[s._v("#")]),s._v(" 临时会话最大文件句柄")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("ulimit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("\n")])])]),a("h3",{attrs:{id:"系统全局最大文件句柄-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统全局最大文件句柄-2"}},[s._v("#")]),s._v(" 系统全局最大文件句柄")]),s._v(" "),a("p",[s._v("编辑修改 /etc/sysctl.conf:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("fs.file-max "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("\n")])])]),a("h3",{attrs:{id:"设置服务的最大文件句柄"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置服务的最大文件句柄"}},[s._v("#")]),s._v(" 设置服务的最大文件句柄")]),s._v(" "),a("p",[s._v("编辑修改 /etc/systemd/system.conf:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DefaultLimitNOFILE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("\n")])])]),a("h3",{attrs:{id:"设置用户的最大文件句柄、最大文件句柄数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置用户的最大文件句柄、最大文件句柄数"}},[s._v("#")]),s._v(" 设置用户的最大文件句柄、最大文件句柄数")]),s._v(" "),a("p",[s._v("编辑修改  /etc/security/limits.conf:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("* soft nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("   \n* hard nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("\n")])])]),a("h2",{attrs:{id:"tcp网络优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcp网络优化"}},[s._v("#")]),s._v(" Tcp网络优化")]),s._v(" "),a("h3",{attrs:{id:"并发连接优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#并发连接优化"}},[s._v("#")]),s._v(" 并发连接优化")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.core.somaxconn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.tcp_max_syn_backlog")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16384")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.core.netdev_max_backlog")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16384")]),s._v("\n")])])]),a("h3",{attrs:{id:"端口使用范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#端口使用范围"}},[s._v("#")]),s._v(" 端口使用范围")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.ip_local_port_range")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1000 65535'")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);