<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQL语句中可用函数</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/logo.svg">
    <script src="/js/iframeSizer.contentWindow.min.js"></script>
    <meta name="description" content="这是fluxmq的官方文档">
    
    <link rel="preload" href="/assets/css/0.styles.fb29a6e6.css" as="style"><link rel="preload" href="/assets/js/app.3c98569e.js" as="script"><link rel="preload" href="/assets/js/2.6c5bc1d3.js" as="script"><link rel="preload" href="/assets/js/20.94b6ca2b.js" as="script"><link rel="prefetch" href="/assets/js/10.87518919.js"><link rel="prefetch" href="/assets/js/11.38972f2e.js"><link rel="prefetch" href="/assets/js/12.34c255af.js"><link rel="prefetch" href="/assets/js/13.5aff14a4.js"><link rel="prefetch" href="/assets/js/14.a81c46cd.js"><link rel="prefetch" href="/assets/js/15.02365660.js"><link rel="prefetch" href="/assets/js/16.35c154ad.js"><link rel="prefetch" href="/assets/js/17.678602d1.js"><link rel="prefetch" href="/assets/js/18.00be67a1.js"><link rel="prefetch" href="/assets/js/19.3e58f9c5.js"><link rel="prefetch" href="/assets/js/21.b4f6a7d2.js"><link rel="prefetch" href="/assets/js/3.2c8ae17f.js"><link rel="prefetch" href="/assets/js/4.6b0ca6fa.js"><link rel="prefetch" href="/assets/js/5.fbfb003a.js"><link rel="prefetch" href="/assets/js/6.a0a96ce6.js"><link rel="prefetch" href="/assets/js/7.ab9b4e1c.js"><link rel="prefetch" href="/assets/js/8.3305ec09.js"><link rel="prefetch" href="/assets/js/9.ee8e53b8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fb29a6e6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/views/product.html" class="sidebar-link">产品介绍</a></li><li><a href="/views/deployment.html" class="sidebar-link">安装部署</a></li><li><a href="/views/guide.html" class="sidebar-link">配置指南</a></li><li><a href="/views/linkManage.html" class="sidebar-link">连接管理</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>规则引擎</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/gzyq/introduce.html" class="sidebar-link">规则引擎介绍</a></li><li><a href="/views/gzyq/grammar.html" class="sidebar-link">规则引擎语法</a></li><li><a href="/views/gzyq/SQLfields.html" class="sidebar-link">SQL中可用字段</a></li><li><a href="/views/gzyq/SQLfunction.html" aria-current="page" class="active sidebar-link">SQL语句中可用函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/gzyq/SQLfunction.html#数学函数" class="sidebar-link">数学函数</a></li><li class="sidebar-sub-header"><a href="/views/gzyq/SQLfunction.html#数据类型判断函数" class="sidebar-link">数据类型判断函数</a></li><li class="sidebar-sub-header"><a href="/views/gzyq/SQLfunction.html#数据类型转换函数" class="sidebar-link">数据类型转换函数</a></li><li class="sidebar-sub-header"><a href="/views/gzyq/SQLfunction.html#字符串函数" class="sidebar-link">字符串函数</a></li><li class="sidebar-sub-header"><a href="/views/gzyq/SQLfunction.html#map函数" class="sidebar-link">Map函数</a></li><li class="sidebar-sub-header"><a href="/views/gzyq/SQLfunction.html#数组函数" class="sidebar-link">数组函数</a></li><li class="sidebar-sub-header"><a href="/views/gzyq/SQLfunction.html#哈希函数" class="sidebar-link">哈希函数</a></li><li class="sidebar-sub-header"><a href="/views/gzyq/SQLfunction.html#压缩解压缩函数" class="sidebar-link">压缩解压缩函数</a></li><li class="sidebar-sub-header"><a href="/views/gzyq/SQLfunction.html#比特操作函数" class="sidebar-link">比特操作函数</a></li><li class="sidebar-sub-header"><a href="/views/gzyq/SQLfunction.html#编解码函数" class="sidebar-link">编解码函数</a></li><li class="sidebar-sub-header"><a href="/views/gzyq/SQLfunction.html#时间函数" class="sidebar-link">时间函数</a></li></ul></li><li><a href="/views/gzyq/shakedownTest.html" class="sidebar-link">创建规则及调试</a></li><li><a href="/views/gzyq/dataBridging.html" class="sidebar-link">数据桥接</a></li><li><a href="/views/gzyq/dataStorage.html" class="sidebar-link">数据存储</a></li><li><a href="/views/gzyq/codec.html" class="sidebar-link">编解码</a></li></ul></section></li><li><a href="/views/monitor.html" class="sidebar-link">运维监测</a></li><li><a href="/views/mqtt.html" class="sidebar-link">MQTT协议介绍</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sql语句中可用函数"><a href="#sql语句中可用函数" class="header-anchor">#</a> SQL语句中可用函数</h1> <h2 id="数学函数"><a href="#数学函数" class="header-anchor">#</a> 数学函数</h2> <table><thead><tr><th><strong>函数名</strong></th> <th><strong>函数作用</strong></th> <th><strong>参数</strong></th> <th><strong>返回值</strong></th></tr></thead> <tbody><tr><td>abs</td> <td>绝对值</td> <td>1. 被操作数</td> <td>绝对值</td></tr> <tr><td>cos</td> <td>余弦</td> <td>1. 被操作数</td> <td>余弦值</td></tr> <tr><td>cosh</td> <td>双曲余弦</td> <td>1. 被操作数</td> <td>双曲余弦值</td></tr> <tr><td>acos</td> <td>反余弦</td> <td>1. 被操作数</td> <td>反余弦值</td></tr> <tr><td>acosh</td> <td>反双曲余弦</td> <td>1. 被操作数</td> <td>反双曲余弦值</td></tr> <tr><td>sin</td> <td>正弦</td> <td>1. 被操作数</td> <td>正弦值</td></tr> <tr><td>sinh</td> <td>双曲正弦</td> <td>1. 被操作数</td> <td>双曲正弦值</td></tr> <tr><td>asin</td> <td>反正弦</td> <td>1. 被操作数</td> <td>值</td></tr> <tr><td>asinh</td> <td>反双曲正弦</td> <td>1. 被操作数</td> <td>反双曲正弦值</td></tr> <tr><td>tan</td> <td>正切</td> <td>1. 被操作数</td> <td>正切值</td></tr> <tr><td>tanh</td> <td>双曲正切</td> <td>1. 被操作数</td> <td>双曲正切值</td></tr> <tr><td>atan</td> <td>反正切</td> <td>1. 被操作数</td> <td>反正切值</td></tr> <tr><td>atanh</td> <td>反双曲正切</td> <td>1. 被操作数</td> <td>反双曲正切值</td></tr> <tr><td>ceil</td> <td>上取整</td> <td>1. 被操作数</td> <td>整数值</td></tr> <tr><td>floor</td> <td>下取整</td> <td>1. 被操作数</td> <td>整数值</td></tr> <tr><td>round</td> <td>四舍五入</td> <td>1. 被操作数</td> <td>整数值</td></tr> <tr><td>exp</td> <td>幂运算</td> <td>1. 被操作数</td> <td>e 的 x 次幂</td></tr> <tr><td>power</td> <td>指数运算</td> <td>1. 左操作数 x</td> <td></td></tr> <tr><td>2. 右操作数 y</td> <td>x 的 y 次方</td> <td></td> <td></td></tr> <tr><td>sqrt</td> <td>平方根运算</td> <td>1. 被操作数</td> <td>平方根</td></tr> <tr><td>fmod</td> <td>负点数取模函数</td> <td>1. 左操作数</td> <td></td></tr> <tr><td>2. 右操作数</td> <td>模</td> <td></td> <td></td></tr> <tr><td>log</td> <td>以 e 为底对数</td> <td>1. 被操作数</td> <td>值</td></tr> <tr><td>log10</td> <td>以 10 为底对数</td> <td>1. 被操作数</td> <td>值</td></tr> <tr><td>log2</td> <td>以 2 为底对数</td> <td>1. 被操作数</td> <td>值</td></tr></tbody></table> <h2 id="数据类型判断函数"><a href="#数据类型判断函数" class="header-anchor">#</a> 数据类型判断函数</h2> <table><thead><tr><th><strong>函数名</strong></th> <th><strong>函数作用</strong></th> <th><strong>参数</strong></th> <th><strong>返回值</strong></th></tr></thead> <tbody><tr><td>is_null</td> <td>判断变量是否为空值</td> <td>Data</td> <td>Boolean 类型的数据。如果为空值(undefined) 则返回 true，否则返回 false</td></tr> <tr><td>is_not_null</td> <td>判断变量是否为非空值</td> <td>Data</td> <td>Boolean 类型的数据。如果为空值(undefined) 则返回 false，否则返回 true</td></tr> <tr><td>is_str</td> <td>判断变量是否为 String 类型</td> <td>Data</td> <td>Boolean 类型的数据。</td></tr> <tr><td>is_bool</td> <td>判断变量是否为 Boolean 类型</td> <td>Data</td> <td>Boolean 类型的数据。</td></tr> <tr><td>is_int</td> <td>判断变量是否为 Integer 类型</td> <td>Data</td> <td>Boolean 类型的数据。</td></tr> <tr><td>is_float</td> <td>判断变量是否为 Float 类型</td> <td>Data</td> <td>Boolean 类型的数据。</td></tr> <tr><td>is_num</td> <td>判断变量是否为数字类型，包括 Integer 和 Float 类型</td> <td>Data</td> <td>Boolean 类型的数据。</td></tr> <tr><td>is_map</td> <td>判断变量是否为 Map 类型</td> <td>Data</td> <td>Boolean 类型的数据。</td></tr> <tr><td>is_array</td> <td>判断变量是否为 Array 类型</td> <td>Data</td> <td>Boolean 类型的数据。</td></tr></tbody></table> <h2 id="数据类型转换函数"><a href="#数据类型转换函数" class="header-anchor">#</a> 数据类型转换函数</h2> <table><thead><tr><th><strong>函数名</strong></th> <th><strong>函数作用</strong></th> <th><strong>参数</strong></th> <th><strong>返回值</strong></th></tr></thead> <tbody><tr><td>str</td> <td>将数据转换为 String 类型</td> <td>Data</td> <td>String 类型的数据。无法转换将会导致 SQL 匹配失败</td></tr> <tr><td>str_utf8</td> <td>将数据转换为 UTF-8 String 类型</td> <td>Data</td> <td>UTF-8 String 类型的数据。无法转换将会导致 SQL 匹配失败</td></tr> <tr><td>bool</td> <td>将数据转换为 Boolean 类型</td> <td>Data</td> <td>Boolean 类型的数据。无法转换将会导致 SQL 匹配失败</td></tr> <tr><td>int</td> <td>将数据转换为整数类型</td> <td>Data</td> <td>整数类型的数据。无法转换将会导致 SQL 匹配失败</td></tr> <tr><td>float</td> <td>将数据转换为浮点型类型</td> <td>Data</td> <td>浮点型类型的数据。无法转换将会导致 SQL 匹配失败</td></tr> <tr><td>float2str</td> <td>将浮点型数字以指定精度转换为字符串</td> <td>1. 浮点型数字 2. 精度</td> <td>字符串</td></tr> <tr><td>map</td> <td>将数据转换为 Map 类型</td> <td>Data</td> <td>Map 类型的数据。无法转换将会导致 SQL 匹配失败</td></tr></tbody></table> <h2 id="字符串函数"><a href="#字符串函数" class="header-anchor">#</a> 字符串函数</h2> <table><thead><tr><th><strong>函数名</strong></th> <th><strong>函数作用</strong></th> <th><strong>参数</strong></th> <th><strong>返回值</strong></th></tr></thead> <tbody><tr><td>lower</td> <td>转为小写</td> <td>1. 原字符串</td> <td>小写字符串</td></tr> <tr><td>upper</td> <td>转为大写</td> <td>1. 原字符串</td> <td>大写字符串</td></tr> <tr><td>trim</td> <td>去掉左右空格</td> <td>1. 原字符串</td> <td>去掉空格后的字符串</td></tr> <tr><td>ltrim</td> <td>去掉左空格</td> <td>1. 原字符串</td> <td>去掉空格后的字符串</td></tr> <tr><td>rtrim</td> <td>去掉右空格</td> <td>1. 原字符串</td> <td>去掉空格后的字符串</td></tr> <tr><td>reverse</td> <td>字符串反转</td> <td>1. 原字符串</td> <td>翻转后的字符串</td></tr> <tr><td>strlen</td> <td>取字符串长度</td> <td>1. 原字符串</td> <td>整数值，字符长度</td></tr> <tr><td>substr</td> <td>取字符的子串</td> <td>1. 原字符串</td> <td></td></tr> <tr><td>2. 起始位置. 注意: 下标从 0 开始</td> <td>子串</td> <td></td> <td></td></tr> <tr><td>substr</td> <td>取字符的子串</td> <td>1. 原字符串</td> <td></td></tr></tbody></table> <h2 id="map函数"><a href="#map函数" class="header-anchor">#</a> Map函数</h2> <table><thead><tr><th><strong>函数名</strong></th> <th><strong>函数作用</strong></th> <th><strong>参数</strong></th> <th><strong>返回值</strong></th></tr></thead> <tbody><tr><td>map_get</td> <td>取 Map 中某个 Key 的值，如果没有则返回空值</td> <td>1. Key</td> <td></td></tr> <tr><td>2. Map</td> <td>Map 中某个 Key 的值。支持嵌套的 Key，比如 &quot;a.b.c&quot;</td> <td></td> <td></td></tr> <tr><td>map_get</td> <td>取 Map 中某个 Key 的值，如果没有则返回指定默认值</td> <td>1. Key</td> <td></td></tr></tbody></table> <h2 id="数组函数"><a href="#数组函数" class="header-anchor">#</a> 数组函数</h2> <table><thead><tr><th><strong>函数名</strong></th> <th><strong>函数作用</strong></th> <th><strong>参数</strong></th> <th><strong>返回值</strong></th></tr></thead> <tbody><tr><td>nth</td> <td>取第 n 个元素，下标从 1 开始</td> <td>1. 起始位置</td> <td></td></tr> <tr><td>2. 原数组</td> <td>第 n 个元素</td> <td></td> <td></td></tr> <tr><td>length</td> <td>获取数组的长度</td> <td>1. 原数组</td> <td>数组长度</td></tr> <tr><td>sublist</td> <td>取从第一个元素开始、长度为 len 的子数组。下标从 1 开始</td> <td>1. 长度 len</td> <td></td></tr> <tr><td>2. 原数组</td> <td>子数组</td> <td></td> <td></td></tr> <tr><td>sublist</td> <td>取从第 n 个元素开始、长度为 len 的子数组。下标从 1 开始</td> <td>1. 起始位置 n</td> <td></td></tr></tbody></table> <h2 id="哈希函数"><a href="#哈希函数" class="header-anchor">#</a> 哈希函数</h2> <table><thead><tr><th><strong>函数名</strong></th> <th><strong>函数功能</strong></th> <th><strong>参数</strong></th> <th><strong>返回值</strong></th></tr></thead> <tbody><tr><td>md5</td> <td>求 MD5 值</td> <td>数据</td> <td>MD5 值</td></tr> <tr><td>sha</td> <td>求 SHA 值</td> <td>数据</td> <td>SHA 值</td></tr> <tr><td>sha256</td> <td>求 SHA256 值</td> <td>数据</td> <td>SHA256 值</td></tr></tbody></table> <h2 id="压缩解压缩函数"><a href="#压缩解压缩函数" class="header-anchor">#</a> 压缩解压缩函数</h2> <table><thead><tr><th><strong>函数名</strong></th> <th><strong>函数功能</strong></th> <th><strong>参数</strong></th> <th><strong>返回值</strong></th></tr></thead> <tbody><tr><td>gzip</td> <td>压缩数据，结果包含 gz 数据头和校验和</td> <td>原始的二进制数据</td> <td>压缩后的二进制数据</td></tr> <tr><td>gunzip</td> <td>解压缩数据，原始数据中包含 gz 数据头和校验和</td> <td>压缩后的二进制数据</td> <td>原始的二进制数据</td></tr> <tr><td>zip</td> <td>压缩数据，结果不包含 zlib 数据头和校验和</td> <td>原始的二进制数据</td> <td>压缩后的二进制数据</td></tr> <tr><td>unzip</td> <td>解压缩数据，原始数据中不包含 zlib 数据头和校验和</td> <td>压缩后的二进制数据</td> <td>原始的二进制数据</td></tr> <tr><td>zip_compress</td> <td>压缩数据，结果包含 zlib 数据头和校验和</td> <td>原始的二进制数据</td> <td>压缩后的二进制数据</td></tr> <tr><td>zip_uncompress</td> <td>解压缩数据，原始数据中包含 zlib 数据头和校验和</td> <td>压缩后的二进制数据</td> <td>原始的二进制数据</td></tr></tbody></table> <h2 id="比特操作函数"><a href="#比特操作函数" class="header-anchor">#</a> 比特操作函数</h2> <table><thead><tr><th><strong>函数名</strong></th> <th><strong>函数功能</strong></th> <th><strong>参数</strong></th> <th><strong>返回值</strong></th></tr></thead> <tbody><tr><td>subbits</td> <td>从二进制数据的起始位置获取指定长度的比特位, 然后转换为无符号整型 (大端).</td> <td>1. 二进制数据</td> <td></td></tr> <tr><td>2. 要获取的长度(bits)</td> <td>无</td> <td></td> <td></td></tr> <tr><td>subbits</td> <td>从二进制数据的指定下标位置获取指定长度的比特位, 然后转换为无符号整型 (大端). 下标是从 1 开始的</td> <td>1. 二进制数据</td> <td></td></tr> <tr><td>2. 起</td> <td>subbits始位置的下标</td> <td></td> <td></td></tr> <tr><td>3. 要获取的长度(bits)</td> <td></td> <td></td> <td></td></tr> <tr><td>subbits</td> <td>从二进制数据的指定下标位置获取指定长度的比特位, 然后按照给定的参数转换为想要的数据类型. 下标是从 1 开始的.</td> <td>1. 二进制数据</td> <td></td></tr></tbody></table> <h2 id="编解码函数"><a href="#编解码函数" class="header-anchor">#</a> 编解码函数</h2> <table><thead><tr><th><strong>函数名</strong></th> <th><strong>函数功能</strong></th> <th><strong>参数</strong></th> <th><strong>返回值</strong></th></tr></thead> <tbody><tr><td>base64_encode</td> <td>BASE64 编码</td> <td>要编码的二进制数据</td> <td>Base64 编码的字符串</td></tr> <tr><td>base64_decode</td> <td>BASE64 解码</td> <td>Base64 编码的字符串</td> <td>解码后的二进制数据</td></tr> <tr><td>json_encode</td> <td>JSON 编码</td> <td>要转成 JSON 的数据结构</td> <td>JSON 字符串</td></tr> <tr><td>json_decode</td> <td>JSON 解码</td> <td>要解码的 JSON 字符串</td> <td>解码后的数据结构</td></tr> <tr><td>bin2hexstr</td> <td>二进制数据转为 Hex 字符串</td> <td>二进制数据</td> <td>Hex 字符串</td></tr> <tr><td>hexstr2bin</td> <td>Hex 字符串转为二进制数据</td> <td>Hex 字符串</td> <td>二进制数据</td></tr></tbody></table> <h2 id="时间函数"><a href="#时间函数" class="header-anchor">#</a> 时间函数</h2> <table><thead><tr><th><strong>Function</strong></th> <th><strong>Purpose</strong></th> <th><strong>Parameters</strong></th> <th><strong>Returned value</strong></th></tr></thead> <tbody><tr><td>now_timestamp</td> <td>返回当前时间的 Unix 秒级时间戳</td> <td>-</td> <td>Unix 时间戳</td></tr> <tr><td>now_timestamp</td> <td>指定时间单位，返回当前时间的 Unix 时间戳</td> <td>1. 时间单位</td> <td>Unix 时间戳</td></tr> <tr><td>now_rfc3339</td> <td>生成当前时间的 RFC3339 字符串，秒级</td> <td>-</td> <td>RFC3339 时间字符串</td></tr> <tr><td>now_rfc3339</td> <td>指定时间单位，生成当前时间的 RFC3339 字符串</td> <td>1. 时间单位</td> <td>RFC3339 时间字符串</td></tr> <tr><td>unix_ts_to_rfc3339</td> <td>将秒级 Unix 时间戳转换为 RFC3339 时间字符串</td> <td>1. Unix 时间戳（秒）</td> <td>RFC3339 时间字符串</td></tr> <tr><td>unix_ts_to_rfc3339</td> <td>指定时间单位，将 Unix 时间戳转换为 RFC3339 时间字符串</td> <td>1. Unix 时间戳</td> <td></td></tr> <tr><td>2. 时间单位</td> <td>RFC3339 时间字符串</td> <td></td> <td></td></tr> <tr><td>rfc3339_to_unix_ts</td> <td>将秒级 RFC3339 时间字符串转换为 Unix 时间戳</td> <td>1. RFC3339 时间字符串</td> <td>Unix 时间戳</td></tr> <tr><td>rfc3339_to_unix_ts</td> <td>指定时间单位，将 RFC3339 时间字符串转换为 Unix 时间戳</td> <td>1. RFC3339 时间字符串</td> <td></td></tr> <tr><td>2. 时间单位</td> <td>Unix 时间戳</td> <td></td> <td></td></tr> <tr><td>format_date</td> <td>时间戳转格式化时间</td> <td>1. 时间戳精度（参考时间戳精度定义）</td> <td></td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/views/gzyq/SQLfields.html" class="prev">
        SQL中可用字段
      </a></span> <span class="next"><a href="/views/gzyq/shakedownTest.html">
        创建规则及调试
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3c98569e.js" defer></script><script src="/assets/js/2.6c5bc1d3.js" defer></script><script src="/assets/js/20.94b6ca2b.js" defer></script>
  </body>
</html>
